# ============================================
# H1N1 Age-Structured SEIR Model Configuration
# ============================================
# Based on: Eames et al. (2012) - Dynamic Social Contact Patterns

model_name: "h1n1_age_structured"
description: "Baseline H1N1 epidemic with school holiday effects"

# ============================================
# DISEASE DYNAMICS PARAMETERS
# ============================================
disease_params:
  transmission_rate: 0.04      # τ - probability of transmission per contact
  latent_period: 1.0           # days - incubation period (E state)
  infectious_period: 1.8       # days - infectious period (I state)
  
  # These are auto-calculated from above:
  # nu = 1/latent_period = 1.0
  # gamma = 1/infectious_period = 0.556

# ============================================
# POPULATION STRUCTURE
# ============================================
population:
  age_groups:
    - "0-18"      # Children and students
    - "19-65+"    # Adults and elderly
  
  sizes: [2000, 8000]  # Total = 10,000
  
  # Percentage breakdown (for reference)
  # 0-18: 20%
  # 19-65+: 80%

# ============================================
# CONTACT MATRICES
# ============================================
# Rows = participant age group
# Columns = contact age group
# Values = average daily contacts

contact_patterns:
  # School TERM TIME contact matrix
  term_time:
    - [25.0, 11.0]    # 0-18 contacts with [0-18, 19-65+]
    - [3.5, 14.5]     # 19-65+ contacts with [0-18, 19-65+]
  
  # School HOLIDAY contact matrix
  holidays:
    - [11.0, 11.5]    # 0-18 contacts with [0-18, 19-65+]
    - [2.0, 14.0]     # 19-65+ contacts with [0-18, 19-65+]
  
  # Note: Children make 56% fewer contacts with each other
  # during holidays (25.0 → 11.0)

# ============================================
# SCHOOL CALENDAR
# ============================================
# Define which days use which contact matrix
school_calendar:
  # Term time periods (use term_time matrix)
  term_periods:
    - [1, 100]        # Days 1-100
    - [130, 250]      # Days 130-250
    - [280, 365]      # Days 280-365
  
  # Holiday periods (use holidays matrix)
  holiday_periods:
    - [101, 129]      # Days 101-129 (summer holiday)
    - [251, 279]      # Days 251-279 (autumn break)

# ============================================
# INITIAL CONDITIONS (at t=0)
# ============================================
initial_conditions:
  # Option 1: Specify exact numbers
  susceptible: [1800, 7200]    # S(0) for each age group
  exposed: [0, 0]              # E(0) 
  infected: [10, 0]            # I(0) - seed 10 infections in children
  recovered: [190, 800]        # R(0) - prior immunity
  
  # Total check: [2000, 8000] = 10,000

# Alternative specification (commented out):
# initial_conditions_alt:
#   infected_count: 10
#   infected_age_group: 0           # Which group gets initial infections
#   prior_immunity_percent: [10, 10]  # % immune in each group
#   # Rest are susceptible

# ============================================
# SIMULATION PARAMETERS
# ============================================
simulation:
  duration: 365              # days (1 year)
  timestep: 0.1             # days (for ODE solver)
  output_frequency: 1        # Save output every N days (1 = daily)
  
  # ODE Solver settings
  solver:
    method: "RK45"          # Options: RK45, LSODA, RK23, DOP853, Radau, BDF
    rtol: 1.0e-6           # Relative tolerance
    atol: 1.0e-8           # Absolute tolerance

# ============================================
# OUTPUT SETTINGS
# ============================================
output:
  path: "./dataset/synthetic/h1n1/"
  filename: "h1n1_2group_baseline.csv"
  
  # Save configuration alongside results
  save_metadata: true
  metadata_filename: "h1n1_2group_baseline_metadata.json"
  
  # Date settings for TimeLLM compatibility
  start_date: "2024-01-01"   # Starting date for CSV
  date_format: "%Y-%m-%d"    # Date format
  
  # What to save in CSV
  save_compartments: true     # S, E, I, R by age group
  save_totals: true          # total_I, total_R
  save_incidence: true       # New infections per day
  save_prevalence: true      # I / Total population

# ============================================
# NOISE/STOCHASTICITY (Optional)
# ============================================
noise:
  enabled: false            # Set to true to add observation noise
  type: "poisson"          # Options: gaussian, poisson
  level: 0.1               # Noise intensity (0.1 = 10%)
  seed: 42                 # Random seed for reproducibility

# ============================================
# MULTIPLE RUNS (Optional)
# ============================================
multiple_runs:
  enabled: false
  n_runs: 10
  
  # Parameters to vary across runs
  vary_parameters:
    transmission_rate: [0.03, 0.04, 0.05]
    initial_infected: [[5, 0], [10, 0], [20, 0]]
  
  # Output naming
  output_pattern: "h1n1_2group_run{run_number}.csv"

# ============================================
# INTERVENTIONS (Optional - for future use)
# ============================================
interventions:
  enabled: false
  
  # Example: School closure intervention
  # school_closure:
  #   start_day: 50
  #   end_day: 80
  #   effectiveness: 0.9  # 90% reduction in 0-18 contacts
  
  # Example: Vaccination
  # vaccination:
  #   start_day: 100
  #   daily_rate: 0.01    # 1% of susceptibles vaccinated per day
  #   age_groups: [0, 1]  # Which groups to vaccinate
  #   efficacy: 0.7       # 70% effective

# ============================================
# VALIDATION
# ============================================
validation:
  check_population_constant: true   # Verify S+E+I+R = constant
  check_negative_values: true       # Error if any compartment < 0
  check_conservation: true          # Mass balance checks

